{
  "title": "DossierToZaak",
  "$id": "https://commongateway.nl/mapping/vrijbrp.dossierToZaak.mapping.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.1",
  "passTrough": false,
  "mapping": {
    "_sourceId": "dossierId",
    "identificatie": "dossierId",
    "omschrijving": "description",
    "bronorganisatie": "bronorganisatie",
    "verantwoordelijkeOrganisatie": "bronorganisatie",
    "zaaktype": "zaaktypeUrl",
    "registratiedatum": "entryDateTime",
    "startdatum": "startDate",
    "eigenschappen": "[{% for eigenschap in eigenschappen %}{% if index > 0 %}, {% endif %}{% set eigenschap = eigenschap|merge({'dossierId': dossierId}) %}{{ map('https://commongateway.nl/mapping/vrijbrp.waardeToZaakEigenschap.mapping.json', eigenschap)|json_encode }}{% endfor %}]",
    "rollen": "[{% if declarant.bsn|default %}{% set bsnArray = {'bsn': declarant.bsn, 'dossierId': dossierId} %}{% if roltypeUrl|default %}{% set bsnArray = bsnArray|merge({'roltypeUrl': roltypeUrl}) %}{% endif %}{{ map('https://commongateway.nl/mapping/vrijbrp.bsnToRol.mapping.json', bsnArray)|json_encode }}{% endif %}]",
    "zaakinformatieobjecten": "[{% if documents|default %}{% set index = 0 %}{% for document in documents %}{% if index > 0 %}, {% endif %}{% if bronorganisatie|default %}{% set document = document|merge({'bronorganisatie': bronorganisatie}) %}{% endif %}{% if informatieobjecttypeUrl|default %}{% set document = document|merge({'informatieobjecttypeUrl': informatieobjecttypeUrl}) %}{% endif %}{{ map('https://commongateway.nl/mapping/vrijbrp.documentToZaakInformatieObject.mapping.json', document)|json_encode }}{% index = index + 1 %}{% endfor %}{% endif %}]"  
    "statussen": "[{% if status|default %}{% if dossierId|default and statustypeUrl|default %}{% set status = status|merge({'dossierId': dossierId, 'statustypeUrl': statustypeUrl}) %}{% endif %}{{ map('https://commongateway.nl/mapping/vrijbrp.statusToZGWStatus.mapping.json', status)|json_encode }}]",
  "cast": {
    "_sourceId": "unsetIfValue==dossierId",
    "identificatie": "unsetIfValue==dossierId",
    "omschrijving": "unsetIfValue==description",
    "bronorganisatie": "unsetIfValue==bronorganisatie",
    "verantwoordelijkeOrganisatie": "unsetIfValue==bronorganisatie",
    "zaaktype": "unsetIfValue==zaaktypeUrl",
    "registratiedatum": "unsetIfValue==entryDateTime",
    "startdatum": "unsetIfValue==startDate",
    "rollen": "jsonToArray",
    "statussen": "jsonToArray",
    "zaakinformatieobjecten": "jsonToArray"
  }
}
